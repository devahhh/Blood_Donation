{% extends 'base.html' %}
{% load static %}
{% block content %}

<!-- Sign Up Start -->
<section id="sign-up">
  <div class="container-fluid my-3">
    <img src="{% static 'imgs/logo.png' %}" alt="">

    <form method="post">
      {% csrf_token %}
      <div class="form-group row my-3">
        <label for="inputName3" class="col-sm-2 col-form-label">Full Name</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="inputName3" name="name" 
                 placeholder="Full Name" required>
        </div>
      </div>
      <div class="form-group row my-3">
        <label for="inputEmail3" class="col-sm-2 col-form-label">Email</label>
        <div class="col-sm-10">
          <input type="email" class="form-control" id="inputEmail3" name="email" 
                 placeholder="Email" required>
        </div>
      </div>
      <div class="form-group row my-3">
        <label for="inputAddress3" class="col-sm-2 col-form-label">Address</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="inputAddress3" name="address" 
                 placeholder="Address" required>
        </div>
      </div>
    
      <div class="form-group row mb-3">
        <label for="inputPassword3" class="col-sm-2 col-form-label">Password</label>
        <div class="col-sm-10">
          <input type="password" class="form-control" id="inputPassword3" name="password" 
                 placeholder="Password" required>
        </div>
      </div>
      <div class="form-group row mb-3">
        <label for="inputCPassword3" class="col-sm-2 col-form-label">Confirm Password</label>
        <div class="col-sm-10">
          <input type="password" class="form-control" id="inputCPassword3" placeholder="Confirm Password" required>
        </div>
        </div>


      <div class="form-group row mb-3">
        <label for="phone" class="col-sm-2 col-form-label">Phone Number</label>
        <div class="col-sm-10">
          <input type="tel" class="form-control" id="phone" name="phone" 
                 placeholder="Phone Number" required>
        </div>
      </div>

      <div class="form-group row mb-3">
        <div class="col-sm-10 offset-sm-2">
          <button class="btn btn-dark px-4" type="submit">Submit</button>
        </div>
      </div><br><br><br>
    </form>

  </div>
</section>
<script>
  const existingEmails = {{ emails|safe }};
  const existingPhones = {{ phones|safe }};

  if (existingEmails.length > 0) {
    document.getElementById('inputEmail3').addEventListener('input', function() {
      const email = (this.value).toLowerCase();
      if (existingEmails.includes(email)) {
        this.value = '';
        alert('This email is already registered. Please use a different email.');
      } else {
        this.setCustomValidity('');
      }
    });
  }
  if (existingPhones.length > 0) {
    document.getElementById('phone').addEventListener('input', function() {
      const phone = this.value;
      if (existingPhones.includes(phone)) {
        this.value = '';
        alert('This phone number is already registered. Please use a different phone number.');
      } else {
        this.setCustomValidity('');
      }
    });
  }
  if (document.getElementById('inputCPassword3')) {
    document.getElementById('inputCPassword3').addEventListener('input', function() {
      const password = document.getElementById('inputPassword3').value;
      if (this.value !== password) {
        this.setCustomValidity('Passwords do not match');
      } else {
        this.setCustomValidity('');
      }
    });
  }
</script>
<!-- Sign Up End -->

{% endblock content %}
